{"ast":null,"code":"import { act } from \"react-dom/test-utils\";\nimport { TYPES } from \"../actions/shoppingActions\";\nexport const ShoppingInitialState = {\n  products: [{\n    id: 1,\n    name: \"producto 1\",\n    precio: 100\n  }, {\n    id: 2,\n    name: \"producto 2\",\n    precio: 200\n  }, {\n    id: 3,\n    name: \"producto 3\",\n    precio: 300\n  }, {\n    id: 4,\n    name: \"producto 4\",\n    precio: 400\n  }, {\n    id: 5,\n    name: \"producto 5\",\n    precio: 500\n  }, {\n    id: 6,\n    name: \"producto 6\",\n    precio: 600\n  }],\n  cart: []\n};\nexport function shoppingReducer(state, action) {\n  switch (action.type) {\n    case TYPES.ADD_TO_CART:\n      {\n        let new_item = state.products.find(product => product.id === action.payload);\n        console.log(new_item);\n        let itemInCart = state.cart.find(item => item.id === new_item.id);\n        return itemInCart ? {\n          ...state,\n          cart: state.cart.map(item => item.id === new_item.id ? {\n            ...item,\n            quantity: item.quantity + 1\n          } : item)\n        } : {\n          ...state,\n          cart: [...state.cart, {\n            ...new_item,\n            quantity: 1\n          }]\n        };\n      }\n    case TYPES.REMOVE_ONE_FROM_CART:\n      {\n        let itemToDelete = state.cart.find(item => item.id === action.payload);\n        return itemToDelete.quantity > 1 ? {\n          ...state,\n          cart: state.cart.map(item => item.id === action.payload ? {\n            ...item,\n            quantity: item.quantity - 1\n          } : item)\n        } : {\n          ...state,\n          cart: state.cart.filter(item => item.id !== action.payload)\n        };\n      }\n    case TYPES.REMOVE_ALL_FROM_CART:\n      {\n        return {\n          ...state,\n          cart: state.cart.filter(item => item.id !== action.payload)\n        };\n      }\n    case TYPES.CLEAR_CART:\n      {\n        return ShoppingInitialState;\n      }\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["act","TYPES","ShoppingInitialState","products","id","name","precio","cart","shoppingReducer","state","action","type","ADD_TO_CART","new_item","find","product","payload","console","log","itemInCart","item","map","quantity","REMOVE_ONE_FROM_CART","itemToDelete","filter","REMOVE_ALL_FROM_CART","CLEAR_CART"],"sources":["D:/MisionTIC/DesarrolloWEB_Ciclo4/Proyecto_Enigma/Proyecto-Ciclo-4/pc4-enigmadt/src/reducers/shoppingReducers.js"],"sourcesContent":["import { act } from \"react-dom/test-utils\";\r\nimport { TYPES } from \"../actions/shoppingActions\";\r\n\r\nexport  const ShoppingInitialState={\r\n\r\n    products:\r\n    [\r\n        {id:1,name:\"producto 1\",precio:100},\r\n        {id:2,name:\"producto 2\",precio:200},\r\n        {id:3,name:\"producto 3\",precio:300},\r\n        {id:4,name:\"producto 4\",precio:400},\r\n        {id:5,name:\"producto 5\",precio:500},\r\n        {id:6,name:\"producto 6\",precio:600}\r\n    ],\r\n    cart:[]\r\n}\r\n\r\nexport function shoppingReducer(state,action){\r\n\r\n    switch (action.type) {\r\n        \r\n        case TYPES.ADD_TO_CART:{\r\n\r\n            let new_item=state.products.find(product=> product.id === action.payload);\r\n\r\n            console.log(new_item);\r\n\r\n            let itemInCart=state.cart.find(item =>item.id===new_item.id);\r\n            \r\n            return itemInCart ? {\r\n                    ...state,\r\n                    cart:state.cart.map((item)=>item.id===new_item.id ? {...item,quantity:item.quantity+1}:item)\r\n\r\n            }:\r\n            {\r\n                ...state,\r\n                cart:[...state.cart,{...new_item,quantity:1}],\r\n            };\r\n          \r\n        }\r\n         \r\n        case TYPES.REMOVE_ONE_FROM_CART:{\r\n            let itemToDelete = state.cart.find(item=> item.id===action.payload);\r\n\r\n            return itemToDelete.quantity>1 ?\r\n            {\r\n                ...state,\r\n                cart:state.cart.map((item)=>item.id === action.payload ?{...item,quantity:item.quantity-1}:item)\r\n            }:{\r\n                ...state,\r\n                cart:state.cart.filter((item)=>item.id !==action.payload)\r\n            };\r\n\r\n        }\r\n        \r\n        case TYPES.REMOVE_ALL_FROM_CART:{\r\n             return{\r\n                ...state,\r\n                cart:state.cart.filter((item)=>item.id !==action.payload)\r\n             }   \r\n        }\r\n\r\n        case TYPES.CLEAR_CART:{\r\n            return ShoppingInitialState;\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}